(this["webpackJsonpeditable-mnca"]=this["webpackJsonpeditable-mnca"]||[]).push([[0],{112:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=112},148:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=148},408:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=408},417:function(e,t,n){"use strict";n.r(t);var r=n(1),o=n(66),i=n.n(o),a=n(3),s=n(4),u=n(5),c=n(6),l=n(7),h=n(8),d=n(15),g=n.n(d),f=n(20),p=(n(75),n(9)),b=n(14),m=n(18),x=n(17),j=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.width,o=void 0===r?void 0:r,i=n.height,a=void 0===i?void 0:i;Object(u.a)(this,e),this.gl=t,this.width=o||Math.trunc(this.gl.canvas.width),this.height=a||Math.trunc(this.gl.canvas.height);var s=this.createFramebufferInfo(),c=this.createFramebufferInfo();this.texture=s.attachments[0],this.frameBuffer=s.framebuffer,this.texture2=c.attachments[0],this.frameBuffer2=c.framebuffer}return Object(c.a)(e,[{key:"createFramebufferInfo",value:function(){return x.createFramebufferInfo(this.gl,[{format:this.gl.RGBA}],this.width,this.height)}},{key:"swap",value:function(){var e=[this.texture2,this.texture];this.texture=e[0],this.texture2=e[1];var t=[this.frameBuffer2,this.frameBuffer];this.frameBuffer=t[0],this.frameBuffer2=t[1]}},{key:"renderTexture",value:function(e){this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.frameBuffer2),this.gl.viewport(0,0,this.width,this.height),x.drawBufferInfo(this.gl,this.gl.TRIANGLES,e),this.swap()}}]),e}();function v(e,t){return t.map((function(t){return e[t]})).flat()}var O=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.mainSources,i=r.texturesSources,c=void 0===i?[]:i,l=r.staticUniforms,h=void 0===l?{}:l,d=r.getFrameUniforms,g=r.targetFps,f=void 0===g?60:g,p=r.codeErrorCallback,j=r.onRender;if(Object(u.a)(this,e),this.renderBody=function(e){var t=Object(s.a)(Object(s.a)({},n.staticUniforms),{},{iFrame:n.frameCount,iTime:.001*e,iDate:n.getIDate()});n.getFrameUniforms&&Object.assign(t,n.getFrameUniforms(t));var r,o=Object(m.a)(n.textureProgramInfos);try{for(o.s();!(r=o.n()).done;){var i=r.value;n.gl.useProgram(i.program),x.setUniforms(i,t),i.textureBuffer.renderTexture(n.bufferInfo)}}catch(l){o.e(l)}finally{o.f()}n.gl.useProgram(n.mainProgramInfo.program),x.setUniforms(n.mainProgramInfo,t),n.bindTexturesToMainProgram(),n.renderMainProgram();var a=function e(){return e.read||n.gl.readPixels(0,0,n.gl.drawingBufferWidth,n.gl.drawingBufferHeight,n.gl.RGBA,n.gl.UNSIGNED_BYTE,n.pixelsBuffer),n.pixelsBuffer};a.read=!1;var u=new Date,c=null;n.previousRenderTime&&(c=u-n.previousRenderTime),n.previousRenderTime=u,n.onRender&&n.onRender(c,n,t,a),n.frameCount+=1,n.rendering&&n.startRendering()},this.requestRender=function(){requestAnimationFrame(n.renderBody)},this.canvasEl=t,!this.canvasEl)throw new Error("No canvas passed in");if(this.gl=t.getContext("webgl2"),!this.gl)throw new Error("Could not get WebGL context");this.bufferInfo=x.createBufferInfoFromArrays(this.gl,{position:v([[-1,-1,0],[1,-1,0],[1,1,0],[-1,1,0]],[0,1,3,3,1,2])}),this.mainProgramInfo=this.createProgramInfo.apply(this,Object(a.a)(o).concat([p])),this.textureProgramInfos=c.map((function(e,t){var r=Object(b.a)(e,2),o=r[0],i=r[1];return n.createTextureProgramInfo(t,o,i,{codeErrorCallback:p})})),this.pixelsBuffer=new Uint8Array(this.gl.drawingBufferWidth*this.gl.drawingBufferHeight*4),this.staticUniforms=Object(s.a)(Object(s.a)({},h),{},{iResolution:[this.gl.canvas.width,this.gl.canvas.height]}),this.getFrameUniforms=d,this.frameCount=0,this.rendering=!1,this.renderTimeout=null,this.targetFps=f,this.renderIntervalDuration=1e3/this.targetFps,this.onRender=j,this.previousRenderTime=null}return Object(c.a)(e,[{key:"createProgramInfo",value:function(e,t,n){var r=x.createProgramInfo(this.gl,[e,t],this.getCodeErrorMessageCallback(n));if(!r)throw new Error("Could not compile sources");return x.setBuffersAndAttributes(this.gl,r,this.bufferInfo),r}},{key:"createTextureProgramInfo",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=r.createBuffer,i=void 0===o||o,a=r.codeErrorCallback,s=this.createProgramInfo(t,n,a);return s.vsSource=t,s.fsSource=n,i&&(s.textureBuffer=new j(this.gl)),s.textureIndex=e,s.textureSite=this.gl.TEXTURE0+e,s.textureVariableName="u_texture".concat(e),s.mainProgramTextureLocation=this.gl.getUniformLocation(this.mainProgramInfo.program,s.textureVariableName),s.mainProgramTextureLocation||console.log("Could not get location for uniform named "+'"'.concat(s.textureVariableName,'" in main program')),s}},{key:"getCodeErrorMessageCallback",value:function(e){return function(t,n){console.log("Shader compilation error",t,n),e&&e(t,n)}}},{key:"bindTexturesToMainProgram",value:function(){var e,t=Object(m.a)(this.textureProgramInfos);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.textureProgramInfos.mainProgramTextureLocation&&(this.gl.uniform1i(this.textureProgramInfos.mainProgramTextureLocation,n.textureIndex),this.gl.activeTexture(n.textureSite),this.gl.bindTexture(this.gl.TEXTURE_2D,n.textureBuffer.texture))}}catch(r){t.e(r)}finally{t.f()}}},{key:"renderMainProgram",value:function(){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height),x.drawBufferInfo(this.gl,this.gl.TRIANGLES,this.bufferInfo)}},{key:"getIDate",value:function(){var e=new Date;return[e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),60*(60*(e.getUTCHours()+1)+e.getUTCMinutes())+e.getUTCSeconds()]}},{key:"restart",value:function(){this.frameCount=0}},{key:"startRendering",value:function(){var e=!(!this.rendering&&!this.renderTimeout);this.stopRendering(!1),this.rendering=!0,e?this.renderTimeout=setTimeout(this.requestRender,this.renderIntervalDuration):this.requestRender()}},{key:"stopRendering",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&(this.previousRenderTime=null),this.rendering=!1,this.renderTimeout&&(clearTimeout(this.renderTimeout),this.renderTimeout=null)}},{key:"setTargetFps",value:function(e){this.targetFps=e,this.renderIntervalDuration=1e3/this.targetFps}},{key:"updateTextureSourceCode",value:function(e,t,n){var r=this.textureProgramInfos[e];if(r.vsSource!==t||r.fsSource!==n){var o=r.program;Object.assign(r,this.createTextureProgramInfo(e,t,n,{createBuffer:!1})),this.gl.deleteProgram(o)}}}]),e}();function C(e,t,n,r){var o=function e(t){if(t!==e.current){var n=e.current,r=null!==e.current,o=null!==t;if(r&&o)return e.onChange&&e.onChange(t,n),e.onUpdate&&e.onUpdate(t,n),e(null),void e(t);e.current=t,!r&&o?(e.onSet&&e.onSet(t),e.onUpdate&&e.onUpdate(t,n)):r&&!o&&(e.onUnset&&e.onUnset(n),e.onUpdate&&e.onUpdate(t,n))}};return o.current=null,o.onSet=e,o.onUnset=t,o.onChange=n,o.onUpdate=r,o}function y(){var e=function e(t){e.call=t};return e.call=null,e.callIfSet=function(){if(e.call)return e.call.apply(this,arguments)},e}var R=n(0),k=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={durations:[]},e.fpsSelector=Object(p.a)((function(e){return e.durations}),(function(e){return e.length?1/(e.reduce((function(e,t){return e+t}))/e.length/1e3):null})),e.onRender=function(t){null!==t?e.setState((function(e){var n=e.durations;return{durations:[].concat(Object(a.a)(n.length<30?n:n.slice(n.length-30+1)),[t])}})):e.setState({durations:[]})},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.props.onRenderRef&&this.props.onRenderRef(this.onRender)}},{key:"componentDidUpdate",value:function(e){this.props.onRenderRef&&e.onRenderRef!==this.props.onRenderRef&&this.props.onRenderRef(this.onRender)}},{key:"render",value:function(){var e=this.fps;return Object(R.jsxs)("label",{children:["FPS:"," ",null===e?"N/A":~~e]})}},{key:"fps",get:function(){return this.fpsSelector(this.state)}}]),n}(r.Component),S=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={shaderError:null,detailedShaderError:null,hasExecutor:!1,running:!1},e.shaderExecutor=null,e.fpsOnRenderRef=y(),e.onCanvasElSet=function(){e.addShaderExecutor()},e.codeErrorCallback=function(t,n){var r,o=t.split("*** Error compiling shader: ");r=o.length>=2?o[1]:t,e.setState((function(e){var t=e.detailedShaderError;return{detailedShaderError:t?"".concat(t,"\n").concat(r):r}}))},e.onCanvasElUnset=function(){e.removeShaderExecutor()},e.canvasRef=C(e.onCanvasElSet,e.onCanvasElUnset),e.onRender=function(t,n,r,o){e.fpsOnRenderRef.callIfSet(t,n,r,o),e.props.onRender&&e.props.onRender(t,n,r,o)},e.onToggleRunningClick=function(){e.setState((function(t){var n=t.hasExecutor,r=t.started;return n&&(r?e.shaderExecutor.stopRendering():e.shaderExecutor.startRendering()),{started:!r}}))},e}return Object(c.a)(n,[{key:"removeShaderExecutor",value:function(){this.shaderExecutor&&(this.shaderExecutor.stopRendering(),this.shaderExecutor=null,this.props.restartRef&&this.props.restartRef(null),this.setState({hasExecutor:!1,started:!1}))}},{key:"addShaderExecutor",value:function(){var e=this;this.removeShaderExecutor(),this.setState({shaderError:null,detailedShaderError:null});try{this.shaderExecutor=new O(this.canvasRef.current,{mainSources:this.props.mainSources,texturesSources:this.props.texturesSources,getFrameUniforms:this.props.getFrameUniforms,onRender:this.onRender,codeErrorCallback:this.codeErrorCallback})}catch(t){return console.error("Could not create shader executor:",t),void this.setState({shaderError:"Could not create shader executor: ".concat(t)})}this.shaderExecutor.startRendering(),this.props.restartRef&&this.props.restartRef((function(){return e.shaderExecutor.restart()})),this.setState({hasExecutor:!0,started:!0})}},{key:"componentDidUpdate",value:function(e){if(e.getFrameUniforms!==this.props.getFrameUniforms&&(this.shaderExecutor.getFrameUniforms=this.props.getFrameUniforms),e.texturesSources!==this.props.texturesSources&&this.shaderExecutor)if(this.props.texturesSources.length===this.shaderExecutor.textureProgramInfos.length){var t,n=Object(m.a)(this.props.texturesSources.entries());try{for(n.s();!(t=n.n()).done;){var r,o=Object(b.a)(t.value,2),i=o[0],s=o[1];(r=this.shaderExecutor).updateTextureSourceCode.apply(r,[i].concat(Object(a.a)(s)))}}catch(u){n.e(u)}finally{n.f()}}else this.addShaderExecutor()}},{key:"render",value:function(){var e=this.state,t=e.shaderError,n=e.detailedShaderError,o=e.hasExecutor,i=e.started,a=this.props,s=a.width,u=void 0===s?720:s,c=a.height,l=void 0===c?405:c,h={width:u,height:l,border:"1px solid black",display:"flex",justifyContent:"center",position:"absolute",top:0,right:0,overflowY:"auto"};return Object(R.jsxs)("div",{style:{position:"relative"},children:[Object(R.jsx)("canvas",{width:u,height:l,ref:this.canvasRef}),t||n?Object(R.jsx)("div",{style:h,children:Object(R.jsxs)("div",{children:[t,n?n.split("\n").map((function(e,t){return Object(R.jsxs)(r.Fragment,{children:[Object(R.jsx)("br",{}),e]},t)})):null]})}):null,Object(R.jsxs)("div",{children:[Object(R.jsx)("button",{disabled:!o,onClick:this.onToggleRunningClick,children:i?"Pause":"Continue"}),Object(R.jsx)(k,{onRenderRef:this.fpsOnRenderRef})]})]})}}]),n}(r.Component),I=n(33),w=n.n(I),E=n(69),T=n.n(E),U=n.p+"static/media/default.ac1cc8ab.vert",M=n.p+"static/media/copyTexture.446d9bff.frag",P=n.p+"static/media/mnca.36d3050f.frag";function D(e){function t(){return n.apply(this,arguments)}function n(){return(n=Object(f.a)(g.a.mark((function n(){var r,o,i;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!==t.contents){n.next=13;break}if(!e.startsWith("data:")){n.next=6;break}r=e,t.contents=N(r),n.next=13;break;case 6:return o=e,n.next=9,fetch(o);case 9:return i=n.sent,n.next=12,i.text();case 12:t.contents=n.sent;case 13:return n.abrupt("return",t.contents);case 14:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return t.contents=null,t}function N(e){return atob(e.split(",",2)[1])}T.a.comparison();var F=D(U),A=D(M),B=D(P),_=Object(p.a)(Object(p.a)((function(e,t){return t.neighbourhoods}),(function(e){return Math.max.apply(Math,Object(a.a)(e.map((function(e){return Math.max.apply(Math,Object(a.a)(e.rings.map((function(e){return e.maxRadius}))))}))))})),(function(e){return e.u_neighbourhoodRings.length}),(function(e,t){return t.rules.length}),(function(e,t){return t.neighbourhoods.length}),(function(e,t,n){return n.presetData.type}),(function(e,t,n){return n.presetData.neighbourhoodType}),(function(e,t,n,r,o,i){return{maxRingRadius:e,neighbourhoodCount:r,neighbourhoodRingCount:t,ruleCount:n,type:o,neighbourhoodType:i}})),L=null;function z(){return K.apply(this,arguments)}function K(){return(K=Object(f.a)(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==L){e.next=6;break}return e.next=3,B();case 3:t=e.sent,n=Object(p.a)(_,w.a.compile(t)),L=function(e,t,r){return n(e,t,r)};case 6:return e.abrupt("return",L);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var q=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).onRingsChange=function(t){e.updateNeighbourhood({rings:t})},e.onSliderChange=function(t){var n=Object(b.a)(t,2),r=n[0],o=n[1];e.updateNeighbourhood({minRadius:r,maxRadius:o})},e.onMoveUpClick=function(){var t=e.props,n=t.index,r=t.neighbourhood,o=t.neighbourhoods;e.updateNeighbourhoods([].concat(Object(a.a)(o.slice(0,n-1)),[r,o[n-1]],Object(a.a)(o.slice(n+1))))},e.onMoveDownClick=function(){var t=e.props,n=t.index,r=t.neighbourhood,o=t.neighbourhoods;e.updateNeighbourhoods([].concat(Object(a.a)(o.slice(0,n)),[o[n+1],r],Object(a.a)(o.slice(n+2))))},e.onAddAfterClick=function(){var t=e.props,n=t.index,r=t.neighbourhoods;e.updateNeighbourhoods([].concat(Object(a.a)(r.slice(0,n+1)),[{minRadius:2,maxRadius:4}],Object(a.a)(r.slice(n+1))))},e.onDeleteClick=function(){var t=e.props,n=t.index,r=t.neighbourhoods;e.updateNeighbourhoods([].concat(Object(a.a)(r.slice(0,n)),Object(a.a)(r.slice(n+1))))},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props,t=e.neighbourhoodType,n=e.index,o=e.neighbourhood,i=e.neighbourhoods,a=e.referencedNeighbourIndexes,s=i.length;return Object(R.jsxs)(r.Fragment,{children:["Neighbourhood ",n+1,"#",Object(R.jsx)("button",{disabled:0===n,onClick:this.onMoveUpClick,children:"Move Up"}),Object(R.jsx)("button",{disabled:n===s-1,onClick:this.onMoveDownClick,children:"Move Down"}),Object(R.jsx)("button",{onClick:this.onAddAfterClick,children:"Add neighbourhood after"}),Object(R.jsx)("button",{disabled:1===s||a.includes(n),title:1===s?"Cannot delete only neighbourhood":a.includes(n)?"Cannot delete neighbour referenced by rules":void 0,onClick:this.onDeleteClick,children:"Delete neighbourhood"}),Object(R.jsx)("br",{}),Object(R.jsx)(pe,{neighbourhoodType:t,neighbourhood:o}),Object(R.jsx)(ge,{neighbourhoodIndex:n,rings:o.rings,onChange:this.onRingsChange})]})}},{key:"updateNeighbourhoods",value:function(e){this.props.onChange&&this.props.onChange(e)}},{key:"updateNeighbourhood",value:function(e){if(this.props.onChange){var t=this.props,n=t.index,r=t.neighbourhood,o=t.neighbourhoods,i=Object(s.a)(Object(s.a)({},r),e);this.updateNeighbourhoods([].concat(Object(a.a)(o.slice(0,n)),[i],Object(a.a)(o.slice(n+1))))}}}]),n}(r.Component),G=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).rulesSelector=function(e){return e.rules},e.referencedNeighbourIndexesSelector=Object(p.a)(e.rulesSelector,(function(e){var t=e.map((function(e){return e.neighbourhoodIndex}));return Array.from(new Set(t)).sort()})),e}return Object(c.a)(n,[{key:"referencedNeighbourIndexes",get:function(){return this.referencedNeighbourIndexesSelector(this.props)}},{key:"render",value:function(){var e=this,t=this.props,n=t.neighbourhoodType,r=t.neighbourhoods,o=t.onChange;return r.map((function(t,i){return Object(R.jsx)(q,{neighbourhoodType:n,index:i,neighbourhood:t,neighbourhoods:r,referencedNeighbourIndexes:e.referencedNeighbourIndexes,onChange:o},i)}))}}]),n}(r.Component),H="editablMncaPresets";var J=function(){var e;try{var t=localStorage.getItem(H);if(!t)return[];if(!(e=JSON.parse(t)))return[]}catch(n){return[]}return e.forEach(X),e}();function V(e){var t=e.filter((function(e){return e.isEditable})).map((function(e){var t=Object(s.a)({},e);return delete t.getConfiguration,t}));try{localStorage.setItem(H,JSON.stringify(t))}catch(n){console.error("Could not save local presets",n)}}function W(e,t){var n={name:function(){var t;do{t=(Math.random()+1).toString(36).substring(2)}while(t in e);return t}(),label:function(t){var n=function(e){return"Copy of ".concat(e)}(t),r=new Set(Object.values(e).map((function(e){return e.label})));if(!r.has(n))return n;for(var o=1;;o++){var i="".concat(n," (").concat(o,")");if(!r.has(i)){n=i;break}}return n}(t.label),isEditable:!0,type:t.type,neighbourhoodType:t.neighbourhoodType,configuration:t.getConfiguration()};return X(n),n}function X(e){var t=JSON.stringify(e.configuration);e.getConfiguration=function(){return JSON.parse(t)}}function Y(e){return Object.fromEntries(e.map((function(e){return[e.name,e]})))}var Q=[].concat(Object(a.a)([{name:"original",label:"Original blobs configuration",isEditable:!1,type:"discrete",neighbourhoodType:"round",getConfiguration:function(){return{neighbourhoods:[{rings:[{minRadius:0,maxRadius:3}]},{rings:[{minRadius:4,maxRadius:7}]}],rules:[{min:12,max:15,result:!1,neighbourhoodIndex:1},{min:43,max:55,result:!0,neighbourhoodIndex:0},{min:10,max:28,result:!1,neighbourhoodIndex:0},{min:75,max:85,result:!1,neighbourhoodIndex:1},{min:35,max:50,result:!1,neighbourhoodIndex:1},{min:21,max:22,result:!0,neighbourhoodIndex:1}]}}},{name:"sustainable",label:"Sustainable blobs",isEditable:!1,type:"discrete",neighbourhoodType:"round",getConfiguration:function(){return{neighbourhoods:[{rings:[{minRadius:0,maxRadius:3}]},{rings:[{minRadius:4,maxRadius:7}]}],rules:[{min:6,max:14,result:!1,neighbourhoodIndex:1},{min:43,max:55,result:!0,neighbourhoodIndex:0},{min:10,max:28,result:!1,neighbourhoodIndex:0},{min:75,max:85,result:!1,neighbourhoodIndex:1},{min:35,max:50,result:!1,neighbourhoodIndex:1},{min:21,max:22,result:!0,neighbourhoodIndex:1}]}}},{name:"worms",label:"Original worms configuration",isEditable:!1,type:"discrete",neighbourhoodType:"round",getConfiguration:function(){return{neighbourhoods:[{rings:[{minRadius:0,maxRadius:3}]},{rings:[{minRadius:4,maxRadius:7}]}],rules:[{min:15,max:18,result:!1,neighbourhoodIndex:1},{min:44.5,max:68,result:!0,neighbourhoodIndex:0},{min:15,max:28,result:!1,neighbourhoodIndex:0},{min:75,max:85,result:!1,neighbourhoodIndex:1},{min:34.3,max:58,result:!1,neighbourhoodIndex:1},{min:18.5,max:20,result:!0,neighbourhoodIndex:1}]}}},{name:"pickles",label:"Original pickles configuration",isEditable:!1,type:"discrete",neighbourhoodType:"round",getConfiguration:function(){return{neighbourhoods:[{rings:[{minRadius:0,maxRadius:14}]},{rings:[{minRadius:0,maxRadius:1},{minRadius:3,maxRadius:5},{minRadius:7,maxRadius:8}]},{rings:[{minRadius:0,maxRadius:11}]},{rings:[{minRadius:1,maxRadius:5},{minRadius:6,maxRadius:8},{minRadius:9,maxRadius:13},{minRadius:14,maxRadius:16}]}],rules:[{min:3.5574790039063,max:13.3405462646484,result:!1,neighbourhoodIndex:3},{min:88.9369750976563,max:97.8306726074219,result:!0,neighbourhoodIndex:3},{min:19.5661345214844,max:21.7895588989258,result:!1,neighbourhoodIndex:2},{min:34.2407354125977,max:38.2428992919922,result:!0,neighbourhoodIndex:2},{min:5.7809033813477,max:11.117121887207,result:!1,neighbourhoodIndex:1},{min:48.4706514282227,max:67.1474161987305,result:!0,neighbourhoodIndex:1},{min:34.2407354125977,max:37.7982144165039,result:!0,neighbourhoodIndex:1},{min:53.3621850585938,max:91.1603994750977,result:!1,neighbourhoodIndex:0},{min:26.2364076538086,max:90.2710297241211,result:!1,neighbourhoodIndex:0}]}}},{name:"conway",label:"Conway's Game of Life",isEditable:!1,type:"discrete",neighbourhoodType:"round",getConfiguration:function(){return{neighbourhoods:[{rings:[{minRadius:0,maxRadius:1}]}],rules:[{min:0,max:100*(1/9+1/18),result:!1,neighbourhoodIndex:0},{min:100*(3/9-1/18),max:100*(3/9+1/18),result:!0,neighbourhoodIndex:0},{min:100*(4/9-1/18),max:100,result:!1,neighbourhoodIndex:0}]}}},{name:"conway-bugs",label:"Conway's Bugs",isEditable:!1,type:"discrete",neighbourhoodType:"square",getConfiguration:function(){return{neighbourhoods:[{rings:[{minRadius:0,maxRadius:5}]}],rules:[{min:47.5206611570248,max:100,result:!1,neighbourhoodIndex:0},{min:27.685950413223143,max:37.603305785123965,result:!0,neighbourhoodIndex:0},{min:0,max:27.685950413223136,result:!1,neighbourhoodIndex:0}]}}},{name:"teeth",label:"Original flying teeth",isEditable:!1,type:"continuous",neighbourhoodType:"round",getConfiguration:function(){return{neighbourhoods:[{rings:[{minRadius:1,maxRadius:15}]},{rings:[{minRadius:0,maxRadius:2},{minRadius:3,maxRadius:4},{minRadius:9,maxRadius:11},{minRadius:12,maxRadius:16}]},{rings:[{minRadius:4,maxRadius:15}]},{rings:[{minRadius:1,maxRadius:2},{minRadius:3,maxRadius:7},{minRadius:11,maxRadius:12}]}],rules:[{min:2.897847317504883,max:8.049575881958008,result:1,neighbourhoodIndex:3},{min:13.040312928771971,max:41.05283699798584,result:1,neighbourhoodIndex:3},{min:7.888584364318847,max:33.48623566894531,result:-1,neighbourhoodIndex:2},{min:4.024787940979004,max:10.947423199462891,result:-1,neighbourhoodIndex:2},{min:5.473711599731446,max:14.167253552246095,result:1,neighbourhoodIndex:1},{min:24.631702198791505,max:26.241617375183107,result:-1,neighbourhoodIndex:1},{min:1.770906694030762,max:39.764904856872555,result:-1,neighbourhoodIndex:0},{min:16.099151763916016,max:21.25088032836914,result:1,neighbourhoodIndex:0}]}}}]),Object(a.a)(J));function Z(e){var t=Object(b.a)(e.domain,2),n=t[0],o=t[1],i=e.handle,a=i.id,u=i.value,c=i.percent,l=e.disabled,h=e.getHandleProps;return Object(R.jsxs)(r.Fragment,{children:[Object(R.jsx)("div",Object(s.a)({style:{left:"".concat(c,"%"),position:"absolute",transform:"translate(-50%, -50%)",WebkitTapHighlightColor:"rgba(0,0,0,0)",zIndex:5,width:28,height:42,cursor:"pointer",backgroundColor:"none"}},h(a))),Object(R.jsx)("div",{role:"slider","aria-valuemin":n,"aria-valuemax":o,"aria-valuenow":u,style:{left:"".concat(c,"%"),position:"absolute",transform:"translate(-50%, -50%)",zIndex:2,width:24,height:24,borderRadius:"50%",boxShadow:"1px 1px 1px 1px rgba(0, 0, 0, 0.3)",backgroundColor:l?"#666":"#ffc400"}})]})}Z.defaultProps={disabled:!1};var $=n(22),ee={position:"absolute",width:"100%",height:42,transform:"translate(0%, -50%)",borderRadius:7,cursor:"pointer"},te={position:"absolute",width:"100%",height:14,transform:"translate(0%, -50%)",borderRadius:7,pointerEvents:"none",backgroundColor:"rgb(155,155,155)"};function ne(e){var t=e.getRailProps;return Object(R.jsxs)(r.Fragment,{children:[Object(R.jsx)("div",Object(s.a)({style:ee},t())),Object(R.jsx)("div",{style:te})]})}function re(e){var t=e.tick,n=e.count,r=e.format;return Object(R.jsxs)("div",{children:[Object(R.jsx)("div",{style:{position:"absolute",marginTop:14,width:1,height:5,backgroundColor:"rgb(200,200,200)",left:"".concat(t.percent,"%")}}),Object(R.jsx)("div",{style:{position:"absolute",marginTop:22,fontSize:10,textAlign:"center",marginLeft:"".concat(-100/n/2,"%"),width:"".concat(100/n,"%"),left:"".concat(t.percent,"%")},children:r(t.value)})]})}function oe(e){var t=e.source,n=e.target,r=e.getTrackProps,o=e.disabled;return Object(R.jsx)("div",Object(s.a)({style:{position:"absolute",transform:"translate(0%, -50%)",height:14,zIndex:1,backgroundColor:o?"#999":"#b28900",borderRadius:7,cursor:"pointer",left:"".concat(t.percent,"%"),width:"".concat(n.percent-t.percent,"%")}},r()))}re.defaultProps={format:function(e){return e}},oe.defaultProps={disabled:!1};var ie={position:"relative",width:"100%",marginTop:25,height:50},ae=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props,t=e.domain,n=e.defaultValues,r=e.onUpdate,o=e.onChange;return Object(R.jsxs)($.c,{mode:2,step:1,domain:t,rootStyle:ie,onUpdate:r,onChange:o,values:n,children:[Object(R.jsx)($.b,{children:function(e){var t=e.getRailProps;return Object(R.jsx)(ne,{getRailProps:t})}}),Object(R.jsx)($.a,{children:function(e){var n=e.handles,r=e.getHandleProps;return Object(R.jsx)("div",{className:"slider-handles",children:n.map((function(e){return Object(R.jsx)(Z,{handle:e,domain:t,getHandleProps:r},e.id)}))})}}),Object(R.jsx)($.e,{left:!1,right:!1,children:function(e){var t=e.tracks,n=e.getTrackProps;return Object(R.jsx)("div",{className:"slider-tracks",children:t.map((function(e){var t=e.id,r=e.source,o=e.target;return Object(R.jsx)(oe,{source:r,target:o,getTrackProps:n},t)}))})}}),Object(R.jsx)($.d,{count:5,children:function(e){var t=e.ticks;return Object(R.jsx)("div",{className:"slider-ticks",children:t.map((function(e){return Object(R.jsx)(re,{tick:e,count:t.length},e.id)}))})}})]})}}]),n}(r.Component),se=[0,100],ue=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={min:e.props.rule.min,max:e.props.rule.max},e.onDeadChange=function(){e.updateRule({result:!1})},e.onAliveChange=function(){e.updateRule({result:!0})},e.onDecreaseChange=function(){e.updateRule({result:-1})},e.onIncreaseChange=function(){e.updateRule({result:1})},e.onNeighbourhoodChange=function(t){var n=t.target.value;e.updateRule({neighbourhoodIndex:parseInt(n,10)})},e.onMoveUpClick=function(){var t=e.props,n=t.index,r=t.rule,o=t.rules;e.updateRules([].concat(Object(a.a)(o.slice(0,n-1)),[r,o[n-1]],Object(a.a)(o.slice(n+1))))},e.onMoveDownClick=function(){var t=e.props,n=t.index,r=t.rule,o=t.rules;e.updateRules([].concat(Object(a.a)(o.slice(0,n)),[o[n+1],r],Object(a.a)(o.slice(n+2))))},e.onAddAfterClick=function(){var t=e.props,n=t.index,r=t.rules;e.updateRules([].concat(Object(a.a)(r.slice(0,n+1)),[{min:20,max:40,result:!1,neighbourhoodIndex:0}],Object(a.a)(r.slice(n+1))))},e.onDeleteClick=function(){var t=e.props,n=t.index,r=t.rules;e.updateRules([].concat(Object(a.a)(r.slice(0,n)),Object(a.a)(r.slice(n+1))))},e.onMinChange=function(t){var n=t.target.value;e.setState({min:parseInt(n,10)})},e.onMinKeyUp=function(t){13===t.keyCode&&e.onMinBlur(t)},e.onMinBlur=function(t){var n=t.target.value;e.updateRule({min:parseInt(n,10)})},e.onMaxChange=function(t){var n=t.target.value;e.setState({max:parseInt(n,10)})},e.onMaxKeyUp=function(t){13===t.keyCode&&e.onMaxBlur(t)},e.onMaxBlur=function(t){var n=t.target.value;e.updateRule({max:parseInt(n,10)})},e.onRuleSliderChange=function(t){var n=Object(b.a)(t,2),r=n[0],o=n[1];e.updateRule({min:r,max:o})},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props,t=e.type,n=e.index,o=e.rule,i=e.rules,a=e.neighbourhoods,s=this.state,u=s.min,c=s.max,l=i.length;return Object(R.jsxs)(r.Fragment,{children:["Rule ",n+1,"#",Object(R.jsxs)("label",{children:["Neighbourhood:",Object(R.jsx)("select",{value:o.neighbourhoodIndex,onChange:this.onNeighbourhoodChange,children:a.map((function(e,t){return Object(R.jsxs)("option",{value:t,children:["Neighbourhood ",t+1]},t)}))})]}),"discrete"===t?Object(R.jsxs)(r.Fragment,{children:[Object(R.jsxs)("label",{children:["Dead",Object(R.jsx)("input",{type:"radio",checked:!o.result,name:"rule".concat(n,"result"),onChange:this.onDeadChange})]}),Object(R.jsxs)("label",{children:["Alive",Object(R.jsx)("input",{type:"radio",checked:o.result,name:"rule".concat(n,"result"),onChange:this.onAliveChange})]})]}):"continuous"===t?Object(R.jsxs)(r.Fragment,{children:[Object(R.jsxs)("label",{children:["Decrease",Object(R.jsx)("input",{type:"radio",checked:-1===o.result,name:"rule".concat(n,"result"),onChange:this.onDecreaseChange})]}),Object(R.jsxs)("label",{children:["Increase",Object(R.jsx)("input",{type:"radio",checked:1===o.result,name:"rule".concat(n,"result"),onChange:this.onIncreaseChange})]})]}):null,Object(R.jsx)("button",{disabled:0===n,onClick:this.onMoveUpClick,children:"Move Up"}),Object(R.jsx)("button",{disabled:n===l-1,onClick:this.onMoveDownClick,children:"Move Down"}),Object(R.jsx)("button",{onClick:this.onAddAfterClick,children:"Add rule after"}),Object(R.jsx)("button",{disabled:1===l,title:1===l?"Cannot delete only rule":void 0,onClick:this.onDeleteClick,children:"Delete rule"}),Object(R.jsx)("br",{}),"Min (",">","):",Object(R.jsx)("input",{type:"textbox",size:5,value:u,onChange:this.onMinChange,onKeyUp:this.onMinKeyUp,onBlur:this.onMinBlur}),"Max (","<=","):",Object(R.jsx)("input",{type:"textbox",size:5,value:c,onChange:this.onMaxChange,onKeyUp:this.onMaxKeyUp,onBlur:this.onMaxBlur}),Object(R.jsx)(ae,{domain:se,defaultValues:[~~o.min,~~o.max],onChange:this.onRuleSliderChange})]})}},{key:"updateRules",value:function(e){this.props.onChange&&this.props.onChange(e)}},{key:"updateRule",value:function(e){if(this.props.onChange){var t=this.props,n=t.index,r=t.rule,o=t.rules,i=Object(s.a)(Object(s.a)({},r),e);this.updateRules([].concat(Object(a.a)(o.slice(0,n)),[i],Object(a.a)(o.slice(n+1))))}}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.rule.min===t.min&&e.rule.max===t.max?null:{min:e.rule.min,max:e.rule.max}}}]),n}(r.Component),ce=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props,t=e.type,n=e.rules,r=e.neighbourhoods,o=e.onChange;return n.map((function(e,i){return Object(R.jsx)(ue,{type:t,index:i,rule:e,rules:n,neighbourhoods:r,onChange:o},i)}))}}]),n}(r.Component),le=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).onRulesChange=function(t){e.updateConfiguration({rules:t})},e.onNeighbourhoodsChange=function(t){e.updateConfiguration({neighbourhoods:t})},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props,t=e.neighbourhoodType,n=e.type,o=e.configuration,i=o.rules,a=o.neighbourhoods;return Object(R.jsxs)(r.Fragment,{children:[Object(R.jsx)(ce,{type:n,rules:i,neighbourhoods:a,onChange:this.onRulesChange}),Object(R.jsx)(G,{neighbourhoodType:t,rules:i,neighbourhoods:a,onChange:this.onNeighbourhoodsChange})]})}},{key:"updateConfiguration",value:function(e){this.props.onChange&&this.props.onChange(Object(s.a)(Object(s.a)({},this.props.configuration),e))}}],[{key:"getInitialConfiguration",value:function(e){return this.getConfigurationFromUrlFragment()||this.getDefaultConfiguration(e)}},{key:"getDefaultConfiguration",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"original",t=Y(Q);return t[e].getConfiguration()}},{key:"getConfigurationFromUrlFragment",value:function(){if(!window.location.hash)return null;var e,t;try{e=atob(window.location.hash.slice(1))}catch(n){return null}try{t=JSON.parse(e)}catch(n){return null}return t.neighbourhoods&&t.rules?t:null}}]),n}(r.Component),he=[0,20],de=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).onMoveUpClick=function(){var t=e.props,n=t.index,r=t.ring,o=t.rings;e.updateRings([].concat(Object(a.a)(o.slice(0,n-1)),[r,o[n-1]],Object(a.a)(o.slice(n+1))))},e.onMoveDownClick=function(){var t=e.props,n=t.index,r=t.ring,o=t.rings;e.updateRings([].concat(Object(a.a)(o.slice(0,n)),[o[n+1],r],Object(a.a)(o.slice(n+2))))},e.onAddAfterClick=function(){var t=e.props,n=t.index,r=t.rings;e.updateRings([].concat(Object(a.a)(r.slice(0,n+1)),[{minRadius:2,maxRadius:5}],Object(a.a)(r.slice(n+1))))},e.onDeleteClick=function(){var t=e.props,n=t.index,r=t.rings;e.updateRings([].concat(Object(a.a)(r.slice(0,n)),Object(a.a)(r.slice(n+1))))},e.onSliderChange=function(t){var n=Object(b.a)(t,2),r=n[0],o=n[1];e.updateRing({minRadius:r,maxRadius:o})},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props,t=e.neighbourhoodIndex,n=e.index,o=e.ring,i=e.rings.length,a=o.minRadius===~~o.minRadius&&o.maxRadius===~~o.maxRadius;return Object(R.jsxs)(r.Fragment,{children:[Object(R.jsx)("br",{}),"Ring ",t+1,".",n+1,"#",Object(R.jsx)("button",{disabled:0===n,onClick:this.onMoveUpClick,children:"Move Up"}),Object(R.jsx)("button",{disabled:n===i-1,onClick:this.onMoveDownClick,children:"Move Down"}),Object(R.jsx)("button",{onClick:this.onAddAfterClick,children:"Add ring after"}),Object(R.jsx)("button",{disabled:1===i,title:1===i?"Cannot delete only ring":void 0,onClick:this.onDeleteClick,children:"Delete ring"}),a?null:Object(R.jsx)("span",{style:{color:"red"},children:"Range edges are not integers, so if you change them, you won't be able to reset them individually"}),Object(R.jsx)(ae,{domain:he,defaultValues:[~~o.minRadius,~~o.maxRadius],onChange:this.onSliderChange})]})}},{key:"updateRings",value:function(e){this.props.onChange&&this.props.onChange(e)}},{key:"updateRing",value:function(e){if(this.props.onChange){var t=this.props,n=t.index,r=t.ring,o=t.rings,i=Object(s.a)(Object(s.a)({},r),e);this.updateRings([].concat(Object(a.a)(o.slice(0,n)),[i],Object(a.a)(o.slice(n+1))))}}}]),n}(r.Component),ge=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props,t=e.neighbourhoodIndex,n=e.rings,r=e.onChange;return n.map((function(e,o){return Object(R.jsx)(de,{neighbourhoodIndex:t,index:o,ring:e,rings:n,onChange:r},o)}))}}]),n}(r.Component),fe=n(29),pe=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).maxRadiusSelector=Object(p.a)((function(e){return e.neighbourhood.rings}),(function(e){var t=e.map((function(e){return e.maxRadius}));return Math.max.apply(Math,Object(a.a)(t))})),e.gridSelector=Object(p.a)((function(e){return e.neighbourhoodType}),Object(p.a)(e.maxRadiusSelector,(function(e){return e.neighbourhood.rings}),(function(e,t){var n,r=fe.a.range(e+1).map((function(){return!1})),o=Object(m.a)(t);try{for(o.s();!(n=o.n()).done;){var i,a=n.value,s=Object(m.a)(fe.a.range(a.minRadius+1,a.maxRadius+1));try{for(s.s();!(i=s.n()).done;){r[i.value]=!0}}catch(u){s.e(u)}finally{s.f()}}}catch(u){o.e(u)}finally{o.f()}return r})),e.maxRadiusSelector,(function(e,t,n){var r=fe.a.range(-n,n+1).map((function(e){return fe.a.range(-n,n+1).map((function(t){return{x:e,y:t}}))})).flat();return r.forEach((function(n){n.isCenter=0===n.x&&0===n.y,n.distance="round"===e?Math.floor(Math.sqrt(n.x*n.x+n.y*n.y)+.5):"square"===e?Math.max(Math.abs(n.x),Math.abs(n.y)):null,n.isActive=!!t[n.distance]})),r})),e}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props.size,t=void 0===e?100:e,n=this.maxRadius,r=this.grid,o=t/(2*n+1);return Object(R.jsx)("svg",{width:t,height:t,style:{border:"1px solid black"},children:r.map((function(e){var t=e.x,r=e.y,i=e.isCenter,a=e.isActive;return Object(R.jsx)("rect",{x:(t+n)*o,y:(r+n)*o,width:o,height:o,stroke:"black",fill:i?"red":a?"white":"grey"},"".concat(t,"-").concat(r))}))})}},{key:"maxRadius",get:function(){return this.maxRadiusSelector(this.props)}},{key:"grid",get:function(){return this.gridSelector(this.props)}}]),n}(r.Component),be=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).urlFragmentSelector=Object(p.a)(Object(p.a)((function(e){return e.configuration}),(function(e){return btoa(JSON.stringify(e))})),(function(e){return"#".concat(e)})),e.onReset=function(){e.updateConfiguration(e.props.initialConfiguration)},e.onKeepRessedingChange=function(t){var n=t.target.checked;e.updateSettings({keepReseeding:n})},e.onPresetChange=function(t){var n=t.target.value;e.setPreset(n)},e.onSaveACopyClick=function(){if(e.props.onPresetsChange){var t=W(e.props.presetsByName,e.props.presetsByName[e.props.settings.preset]);t.label=prompt("Choose a name",t.label),e.props.onPresetsChange([].concat(Object(a.a)(e.props.presets),[t]),(function(){e.setPreset(t.name)}))}},e.onUpdatePresetClick=function(){var t=e.props.presets,n=t.findIndex((function(t){return t.name===e.props.settings.preset}));if(n<0)console.error("Could not find preset ".concat(e.settings.preset));else{var r=t[n],o=e.props.configuration,i=Object(s.a)(Object(s.a)({},r),{},{configuration:o});X(i),e.props.onPresetsChange([].concat(Object(a.a)(t.slice(0,n)),[i],Object(a.a)(t.slice(n+1)))),e.updateInitialConfiguration(o)}},e.onRenamePresetClick=function(){var t=e.props.presets,n=t.findIndex((function(t){return t.name===e.props.settings.preset}));if(n<0)console.error("Could not find preset ".concat(e.settings.preset));else{var r=t[n],o=Object(s.a)({},r);o.label=prompt("Choose a name",o.label),e.props.onPresetsChange([].concat(Object(a.a)(t.slice(0,n)),[o],Object(a.a)(t.slice(n+1))))}},e.onDeletePresetClick=function(){var t=e.props.presets,n=t.findIndex((function(t){return t.name===e.props.settings.preset}));n<0?console.error("Could not find preset ".concat(e.settings.preset)):(e.props.onPresetsChange([].concat(Object(a.a)(t.slice(0,n)),Object(a.a)(t.slice(n+1)))),e.setPreset(t[0].name))},e.onMonochromeChange=function(t){var n=t.target.checked;e.updateSettings({monochrome:n})},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props,t=e.presets,n=e.presetsByName,o=e.settings,i=o.keepReseeding,a=o.preset,s=o.monochrome,u=e.initialConfiguration,c=e.configuration;return Object(R.jsxs)(r.Fragment,{children:[Object(R.jsx)("button",{onClick:this.props.onRestart,children:"Restart"}),Object(R.jsx)("button",{onClick:this.onReset,children:"Reset Configuration"}),Object(R.jsx)("a",{href:this.urlFragment,children:"Share configuration"}),Object(R.jsx)("br",{}),Object(R.jsx)("br",{}),Object(R.jsxs)("label",{children:["Keep reseeding",Object(R.jsx)("input",{type:"checkbox",checked:i,onChange:this.onKeepRessedingChange})]}),Object(R.jsxs)("label",{children:["Preset:",Object(R.jsx)("select",{value:a,onChange:this.onPresetChange,children:t.map((function(e){return Object(R.jsxs)("option",{value:e.name,children:[e.isEditable?"[Local]":""," ",e.label]},e.name)}))})]}),Object(R.jsx)("button",{onClick:this.onSaveACopyClick,children:"Make a local copy"}),Object(R.jsx)("button",{disabled:!n[a].isEditable||u===c,title:n[a].isEditable?u===c?"No changes to save":void 0:"This preset is not editable",onClick:this.onUpdatePresetClick,children:"Update local preset"}),Object(R.jsx)("button",{disabled:!n[a].isEditable,title:n[a].isEditable?void 0:"This preset is not editable",onClick:this.onRenamePresetClick,children:"Rename local preset"}),Object(R.jsx)("button",{disabled:!n[a].isEditable,title:n[a].isEditable?void 0:"This preset is not editable ",onClick:this.onDeletePresetClick,children:"Delete local preset"}),Object(R.jsxs)("label",{children:["Monochrome",Object(R.jsx)("input",{type:"checkbox",checked:s,onChange:this.onMonochromeChange})]})]})}},{key:"urlFragment",get:function(){return this.urlFragmentSelector(this.props)}},{key:"updateSettings",value:function(e){this.props.onChange&&this.props.onChange(Object(s.a)(Object(s.a)({},this.props.settings),e))}},{key:"updateInitialConfiguration",value:function(e){this.props.onInitialConfigurationChange?this.props.onInitialConfigurationChange(e):console.log("No onInitialConfigurationChange")}},{key:"updateConfiguration",value:function(e){this.props.onConfigurationChange&&this.props.onConfigurationChange(e)}},{key:"setPreset",value:function(e){var t=this.props.presetsByName[e],n=t.getConfiguration();this.updateSettings({preset:e,presetData:t}),this.updateInitialConfiguration(n),this.updateConfiguration(n)}}],[{key:"getDefaultSettings",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"original",t=Y(Q),n=t[e];return{keepReseeding:!0,preset:e,presetData:n,monochrome:!1}}}]),n}(r.Component),me=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={presets:Q},e.presetsByNameSelector=Object(p.a)((function(e){return e.presets}),(function(e){return Object.fromEntries(e.map((function(e){return[e.name,e]})))})),e.onPresetsChange=function(t,n){e.setState({presets:t},n),V(t)},e}return Object(c.a)(n,[{key:"presetsByName",get:function(){return this.presetsByNameSelector(this.state)}},{key:"render",value:function(){var e=this.presetsByName,t=this.state.presets,n=this.props,r=n.configuration,o=n.initialConfiguration,i=n.settings;return Object(R.jsxs)("div",{style:{margin:"10%",height:120,width:"80%"},children:[Object(R.jsx)("h3",{children:"Settings"}),Object(R.jsx)(be,{presets:t,presetsByName:e,onPresetsChange:this.onPresetsChange,settings:i,initialConfiguration:o,configuration:r,onRestart:this.props.onRestart,onChange:this.props.onSetingsChange,onInitialConfigurationChange:this.props.onInitialConfigurationChange,onConfigurationChange:this.props.onConfigurationChange}),Object(R.jsx)("h3",{children:"Configuration"}),Object(R.jsx)(le,{neighbourhoodType:i.presetData.neighbourhoodType,type:i.presetData.type,configuration:r,onChange:this.props.onConfigurationChange})]})}}],[{key:"getInitialSettingsAndConfiguration",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"original",t=be.getDefaultSettings(e),n=le.getInitialConfiguration(t.preset);return{settings:t,initialConfiguration:n,configuration:n}}}]),n}(r.Component),xe=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return Object(R.jsxs)("div",{children:[Object(R.jsx)("h2",{children:"Editable Multiple Network Cellular Automata"}),Object(R.jsx)("h3",{children:"Inspiration"}),Object(R.jsxs)("p",{children:["Slackerman introduced MCNA in one of his ",Object(R.jsx)("a",{href:"https://slackermanz.com/understanding-multiple-neighborhood-cellular-automata/",children:"Slackermanz' blog posts"}),", which also included the shader code for some examples."]}),Object(R.jsxs)("p",{children:["I was fascinated by ",Object(R.jsx)("a",{href:"https://www.shadertoy.com/view/7ll3R7",children:"one in particular"}),", I quickly ",Object(R.jsx)("a",{href:"https://www.shadertoy.com/view/ss3Xz8",children:"edited it a bit"}),", and I run three independent versions of the concept, one for each red, green, blue channels."]}),Object(R.jsx)("h3",{children:"Purpose"}),Object(R.jsx)("p",{children:"I really wanted to see how does the automaton behave with different rules, so I spent some time to refactor the code a bit, and make it easy to pass the parameters."}),Object(R.jsx)("p",{children:"Hopefully, this will lead to the discovery of more interesting rules, and an easier way to research MCNA!"}),Object(R.jsx)("h3",{children:"Features"}),Object(R.jsxs)("ul",{children:[Object(R.jsx)("li",{children:"3 independent channels or monochrome"}),Object(R.jsx)("li",{children:"Editable neighbourhoods and rules"}),Object(R.jsx)("li",{children:"Multiple rings per neighbourhood"}),Object(R.jsx)("li",{children:"Discrete or continuous calculations"}),Object(R.jsx)("li",{children:"Round or square neighbourhoods"}),Object(R.jsx)("li",{children:"Neighbourhood visualition"}),Object(R.jsx)("li",{children:"Sharable links"}),Object(R.jsx)("li",{children:"Local saving of custom presets"})]}),Object(R.jsx)("h3",{children:"Roadmap"}),Object(R.jsx)("p",{children:Object(R.jsx)("a",{href:"https://codesandbox.io/s/keen-elion-2ghjn",children:"Check the code"})}),Object(R.jsxs)("ul",{children:[Object(R.jsx)("li",{children:"Arbirtrary definition of neighbourhoods"}),Object(R.jsx)("li",{children:"Nicer interface"})]}),Object(R.jsx)("h3",{children:"Tips"}),Object(R.jsx)("p",{children:'Run in monochrome, click "Restart", after a while disable the monchrome, and disable "Keep reseeding" after 1 flash - see the divergence of each channel spread!'})]})}}]),n}(r.Component),je=function(){var e=Object(f.a)(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F();case 2:return t=e.sent,e.next=5,A();case 5:return n=e.sent,e.abrupt("return",[t,n]);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ve=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).vertexShaderCode=null,e.state=Object(s.a)(Object(s.a)({},me.getInitialSettingsAndConfiguration()),{},{mainSources:null,texturesSources:null,percentagesActive:{monochrome:null,red:null,green:null,blue:null}}),e.updateMainSources=Object(f.a)(g.a.mark((function t(){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===e.state.mainSources){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,je();case 4:n=t.sent,e.vertexShaderCode=n[0],e.setState({mainSources:n});case 7:case"end":return t.stop()}}),t)}))),e.restartRef=y(),e.onSettingsChange=function(t){e.setState({settings:t})},e.onInitialConfigurationChange=function(t){e.setState({initialConfiguration:t})},e.onConfigurationChange=function(t){e.setState({configuration:t},e.updateTextureSources())},e.neighbourhoodsSelector=function(e){return e.configuration.neighbourhoods},e.neibhourhoodRingsUniformSelector=Object(p.a)(e.neighbourhoodsSelector,(function(e){return e.map((function(e,t){return e.rings.map((function(e){return[e.minRadius,e.maxRadius,t]})).flat()})).flat()})),e.maxRingRadiusSelector=Object(p.a)(e.neighbourhoodsSelector,(function(e){return Math.max.apply(Math,Object(a.a)(e.map((function(e){return Math.max.apply(Math,Object(a.a)(e.rings.map((function(e){return e.maxRadius}))))}))))})),e.typeSelector=function(e){return e.settings.presetData.type},e.rulesSelector=function(e){return e.configuration.rules},e.rulesUniformSelector=Object(p.a)(e.typeSelector,e.rulesSelector,(function(e,t){return t.map((function(t){return[t.min/100,t.max/100,"discrete"===e?t.result?1:0:t.result,t.neighbourhoodIndex]})).flat()})),e.keepReseedingSelector=function(e){return e.settings.keepReseeding},e.monochromeSelector=function(e){return e.settings.monochrome},e.frameUniformsSelector=Object(p.a)(e.neibhourhoodRingsUniformSelector,e.rulesUniformSelector,e.keepReseedingSelector,e.monochromeSelector,e.maxRingRadiusSelector,(function(e,t,n,r,o){return{u_neighbourhoodRings:e,u_rules:t,u_keepReseeding:n,u_monochrome:r,u_maxRingRadius:o}})),e.getFrameUniforms=function(){return e.frameUniforms},e.onRender=function(t,n,r,o){if(r.iFrame%30===0){var i=o(),a=i.length/4;if(e.state.settings.monochrome){for(var u=0,c=0;c<4*a;c+=4)u+=i[c+0]>0;e.setState((function(e){var t=e.percentagesActive;return{percentagesActive:Object(s.a)(Object(s.a)({},t),{},{monochrome:~~(u/a*100)})}}))}else{for(var l=0,h=0,d=0,g=0;g<4*a;g+=4)l+=i[g+0]>0,h+=i[g+1]>0,d+=i[g+2]>0;e.setState((function(e){var t=e.percentagesActive;return{percentagesActive:Object(s.a)(Object(s.a)({},t),{},{red:~~(l/a*100),green:~~(h/a*100),blue:~~(d/a*100)})}}))}}},e.getMncaCode=null,e.texturesSourcesSelector=Object(p.a)(e.frameUniformsSelector,(function(t){return[[e.vertexShaderCode,e.getMncaCode(t,e.state.configuration,e.state.settings)]]})),e.updateTextureSources=Object(f.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.updateMainSources();case 2:if(null!==e.getMncaCode){t.next=6;break}return t.next=5,z();case 5:e.getMncaCode=t.sent;case 6:e.setState({texturesSources:e.texturesSources});case 7:case"end":return t.stop()}}),t)}))),e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.updateMainSources(),this.updateTextureSources()}},{key:"render",value:function(){var e=this.state,t=e.settings,n=e.initialConfiguration,o=e.configuration,i=e.mainSources,a=e.texturesSources,s=e.percentagesActive;return Object(R.jsxs)("div",{children:[Object(R.jsx)(xe,{}),null!==i&&null!==a?Object(R.jsx)(S,{mainSources:i,texturesSources:a,getFrameUniforms:this.getFrameUniforms,restartRef:this.restartRef,onRender:this.onRender}):null,Object(R.jsxs)("div",{children:["Percentage active"," ",t.monochrome?"".concat(s.monochrome||"?","%"):Object(R.jsxs)(r.Fragment,{children:[Object(R.jsxs)("span",{style:{color:"red"},children:[s.red||"?","% R"]}),","," ",Object(R.jsxs)("span",{style:{color:"green"},children:[s.green||"?","% G"]}),","," ",Object(R.jsxs)("span",{style:{color:"blue"},children:[s.blue||"?","% B"]})]})]}),Object(R.jsx)(me,{settings:t,initialConfiguration:n,configuration:o,onRestart:this.restartRef.callIfSet,onSetingsChange:this.onSettingsChange,onInitialConfigurationChange:this.onInitialConfigurationChange,onConfigurationChange:this.onConfigurationChange})]})}},{key:"neibhourhoodRingssUniform",get:function(){return this.neibhourhoodRingsUniformSelector(this.state)}},{key:"maxRingRadius",get:function(){return this.maxRingRadiusSelector(this.state)}},{key:"rulesUniform",get:function(){return this.rulesUniformSelector(this.state)}},{key:"frameUniforms",get:function(){return this.frameUniformsSelector(this.state)}},{key:"texturesSources",get:function(){return this.texturesSourcesSelector(this.state)}}]),n}(r.Component),Oe=ve,Ce=document.getElementById("root");i.a.render(Object(R.jsx)(r.StrictMode,{children:Object(R.jsx)(Oe,{})}),Ce)},75:function(e,t,n){}},[[417,1,2]]]);
//# sourceMappingURL=main.2d94b56d.chunk.js.map